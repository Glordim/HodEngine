#pragma once
#include "HodEngine/Input/Export.hpp"

#include <Windows.h>

#include "HodEngine/Input/Devices/DeviceKeyboard.hpp"
#include "HodEngine/Input/Input.hpp"

namespace hod::input
{
	/// @brief 
	class HOD_INPUT_API DeviceKeyboardRawInput : public DeviceKeyboard
	{
	public:
											DeviceKeyboardRawInput(HANDLE handle, const std::string_view& sName, const RID_DEVICE_INFO_KEYBOARD& info);
											DeviceKeyboardRawInput(const DeviceKeyboardRawInput&) = delete;
											DeviceKeyboardRawInput(DeviceKeyboardRawInput&&) = delete;
											~DeviceKeyboardRawInput() override = default;

		DeviceKeyboardRawInput&				operator = (const DeviceKeyboardRawInput&) = delete;
		DeviceKeyboardRawInput&				operator = (DeviceKeyboardRawInput&&) = delete;

	public:

		HANDLE								GetHandle();

		void								ReadRawInput(const RAWKEYBOARD& rawKeyboard);

	protected:

		bool								ApplyFeedback(Feedback& feedback) override;

	private:

		static UID							ComputeDeviceUID(HANDLE hDevice);

	private:

		HANDLE								_handle = nullptr;

		Input								_keys[InputId::KeyboardEnumCount] = {
												InputId::KeyEscape,
												InputId::Key1,
												InputId::Key2,
												InputId::Key3,
												InputId::Key4,
												InputId::Key5,
												InputId::Key6,
												InputId::Key7,
												InputId::Key8,
												InputId::Key9,
												InputId::Key0,
												InputId::KeySubtract,
												InputId::KeyEqual,
												InputId::KeyBackspace,
												InputId::KeyTab,
												InputId::KeyQ,
												InputId::KeyW,
												InputId::KeyE,
												InputId::KeyR,
												InputId::KeyT,
												InputId::KeyY,
												InputId::KeyU,
												InputId::KeyI,
												InputId::KeyO,
												InputId::KeyP,
												InputId::KeyLeftBracket,
												InputId::KeyRightBracket,
												InputId::KeyEnter,
												InputId::KeyLeftControl,
												InputId::KeyA,
												InputId::KeyS,
												InputId::KeyD,
												InputId::KeyF,
												InputId::KeyG,
												InputId::KeyH,
												InputId::KeyJ,
												InputId::KeyK,
												InputId::KeyL,
												InputId::KeySemicolon,
												InputId::KeyApostrophe,
												InputId::KeyTilde,
												InputId::KeyLeftShift,
												InputId::KeyBackslash,
												InputId::KeyZ,
												InputId::KeyX,
												InputId::KeyC,
												InputId::KeyV,
												InputId::KeyB,
												InputId::KeyN,
												InputId::KeyM,
												InputId::KeyComma,
												InputId::KeyPeriod,
												InputId::KeySlash,
												InputId::KeyRightShift,
												InputId::KeyNumpadMultiply,
												InputId::KeyLeftAlt,
												InputId::KeySpace,
												InputId::KeyCapsLock,
												InputId::KeyF1,
												InputId::KeyF2,
												InputId::KeyF3,
												InputId::KeyF4,
												InputId::KeyF5,
												InputId::KeyF6,
												InputId::KeyF7,
												InputId::KeyF8,
												InputId::KeyF9,
												InputId::KeyF10,
												InputId::KeyNumLock,
												InputId::KeyScrollLock,
												InputId::KeyNumpad7,
												InputId::KeyNumpad8,
												InputId::KeyNumpad9,
												InputId::KeyNumpadSubtract,
												InputId::KeyNumpad4,
												InputId::KeyNumpad5,
												InputId::KeyNumpad6,
												InputId::KeyNumpadAdd,
												InputId::KeyNumpad1,
												InputId::KeyNumpad2,
												InputId::KeyNumpad3,
												InputId::KeyNumpad0,
												InputId::KeyNumpadDecimal,
												InputId::KeySysRq,
												InputId::KeyScancode85,
												InputId::KeyUnlabelled,
												InputId::KeyF11,
												InputId::KeyF12,
												InputId::KeyF13,
												InputId::KeyF14,
												InputId::KeyF15,
												InputId::KeyF16,
												InputId::KeyF17,
												InputId::KeyF18,
												InputId::KeyF19,
												InputId::KeyF20,
												InputId::KeyF21,
												InputId::KeyF22,
												InputId::KeyF23,
												InputId::KeyF24,
												InputId::KeyOem1,
												InputId::KeyOem2,
												InputId::KeyOem3,
												InputId::KeyOem4,
												InputId::KeyOem5,
												InputId::KeyOem6,
												InputId::KeyOem7,
												InputId::KeyScancode108,
												InputId::KeyScancode109,
												InputId::KeyScancode110,
												InputId::KeyScancode111,
												InputId::KeyScancode112,
												InputId::KeyScancode113,
												InputId::KeyScancode114,
												InputId::KeyScancode115,
												InputId::KeyScancode116,
												InputId::KeyScancode117,
												InputId::KeyScancode118,
												InputId::KeyScancode119,
												InputId::KeyScancode120,
												InputId::KeyScancode121,
												InputId::KeyScancode122,
												InputId::KeyScancode123,
												InputId::KeyScancode124,
												InputId::KeyScancode125,
												InputId::KeyScancode126,
												InputId::KeyScancode127,
												InputId::KeyScancode128,
												InputId::KeyScancode129,
												InputId::KeyScancode130,
												InputId::KeyScancode131,
												InputId::KeyScancode132,
												InputId::KeyScancode133,
												InputId::KeyScancode134,
												InputId::KeyScancode135,
												InputId::KeyScancode136,
												InputId::KeyScancode137,
												InputId::KeyScancode138,
												InputId::KeyScancode139,
												InputId::KeyScancode140,
												InputId::KeyScancode141,
												InputId::KeyScancode142,
												InputId::KeyScancode143,
												InputId::KeyScancode144,
												InputId::KeyScancode145,
												InputId::KeyScancode146,
												InputId::KeyScancode147,
												InputId::KeyScancode148,
												InputId::KeyScancode149,
												InputId::KeyScancode150,
												InputId::KeyScancode151,
												InputId::KeyScancode152,
												InputId::KeyScancode153,
												InputId::KeyScancode154,
												InputId::KeyScancode155,
												InputId::KeyScancode156,
												InputId::KeyScancode157,
												InputId::KeyScancode158,
												InputId::KeyScancode159,
												InputId::KeyScancode160,
												InputId::KeyScancode161,
												InputId::KeyScancode162,
												InputId::KeyScancode163,
												InputId::KeyScancode164,
												InputId::KeyScancode165,
												InputId::KeyScancode166,
												InputId::KeyScancode167,
												InputId::KeyScancode168,
												InputId::KeyScancode169,
												InputId::KeyScancode170,
												InputId::KeyScancode171,
												InputId::KeyScancode172,
												InputId::KeyScancode173,
												InputId::KeyScancode174,
												InputId::KeyScancode175,
												InputId::KeyScancode176,
												InputId::KeyScancode177,
												InputId::KeyScancode178,
												InputId::KeyScancode179,
												InputId::KeyScancode180,
												InputId::KeyScancode181,
												InputId::KeyScancode182,
												InputId::KeyScancode183,
												InputId::KeyScancode184,
												InputId::KeyScancode185,
												InputId::KeyScancode186,
												InputId::KeyScancode187,
												InputId::KeyScancode188,
												InputId::KeyScancode189,
												InputId::KeyScancode190,
												InputId::KeyScancode191,
												InputId::KeyScancode192,
												InputId::KeyScancode193,
												InputId::KeyScancode194,
												InputId::KeyScancode195,
												InputId::KeyScancode196,
												InputId::KeyScancode197,
												InputId::KeyScancode198,
												InputId::KeyScancode199,
												InputId::KeyScancode200,
												InputId::KeyScancode201,
												InputId::KeyScancode202,
												InputId::KeyScancode203,
												InputId::KeyScancode204,
												InputId::KeyScancode205,
												InputId::KeyScancode206,
												InputId::KeyScancode207,
												InputId::KeyScancode208,
												InputId::KeyScancode209,
												InputId::KeyScancode210,
												InputId::KeyScancode211,
												InputId::KeyScancode212,
												InputId::KeyScancode213,
												InputId::KeyScancode214,
												InputId::KeyScancode215,
												InputId::KeyScancode216,
												InputId::KeyScancode217,
												InputId::KeyScancode218,
												InputId::KeyScancode219,
												InputId::KeyScancode220,
												InputId::KeyScancode221,
												InputId::KeyScancode222,
												InputId::KeyScancode223,
												InputId::KeyScancode224,
												InputId::KeyScancode225,
												InputId::KeyScancode226,
												InputId::KeyScancode227,
												InputId::KeyScancode228,
												InputId::KeyScancode229,
												InputId::KeyScancode230,
												InputId::KeyScancode231,
												InputId::KeyScancode232,
												InputId::KeyScancode233,
												InputId::KeyScancode234,
												InputId::KeyScancode235,
												InputId::KeyScancode236,
												InputId::KeyScancode237,
												InputId::KeyScancode238,
												InputId::KeyScancode239,
												InputId::KeyScancode240,
												InputId::KeyScancode241,
												InputId::KeyScancode242,
												InputId::KeyScancode243,
												InputId::KeyScancode244,
												InputId::KeyScancode245,
												InputId::KeyScancode246,
												InputId::KeyScancode247,
												InputId::KeyScancode248,
												InputId::KeyScancode249,
												InputId::KeyScancode250,
												InputId::KeyScancode251,
												InputId::KeyScancode252,
												InputId::KeyScancode253,
												InputId::KeyScancode254,
												InputId::KeyScancode255,
												InputId::KeyEscapeScancode0,
												InputId::KeyEscapeScancode1,
												InputId::KeyEscapeScancode2,
												InputId::KeyEscapeScancode3,
												InputId::KeyEscapeScancode4,
												InputId::KeyEscapeScancode5,
												InputId::KeyEscapeScancode6,
												InputId::KeyEscapeScancode7,
												InputId::KeyEscapeScancode8,
												InputId::KeyEscapeScancode9,
												InputId::KeyEscapeScancode10,
												InputId::KeyEscapeScancode11,
												InputId::KeyEscapeScancode12,
												InputId::KeyEscapeScancode13,
												InputId::KeyEscapeScancode14,
												InputId::KeyEscapeScancode15,
												InputId::KeyEscapeScancode16,
												InputId::KeyEscapeScancode17,
												InputId::KeyEscapeScancode18,
												InputId::KeyEscapeScancode19,
												InputId::KeyEscapeScancode20,
												InputId::KeyEscapeScancode21,
												InputId::KeyEscapeScancode22,
												InputId::KeyEscapeScancode23,
												InputId::KeyEscapeScancode24,
												InputId::KeyEscapeScancode25,
												InputId::KeyEscapeScancode26,
												InputId::KeyEscapeScancode27,
												InputId::KeyEscapeScancode28,
												InputId::KeyEscapeScancode29,
												InputId::KeyEscapeScancode30,
												InputId::KeyEscapeScancode31,
												InputId::KeyEscapeScancode32,
												InputId::KeyEscapeScancode33,
												InputId::KeyEscapeScancode34,
												InputId::KeyEscapeScancode35,
												InputId::KeyEscapeScancode36,
												InputId::KeyEscapeScancode37,
												InputId::KeyEscapeScancode38,
												InputId::KeyEscapeScancode39,
												InputId::KeyEscapeScancode40,
												InputId::KeyEscapeScancode41,
												InputId::KeyEscapeScancode42,
												InputId::KeyEscapeScancode43,
												InputId::KeyEscapeScancode44,
												InputId::KeyEscapeScancode45,
												InputId::KeyEscapeScancode46,
												InputId::KeyEscapeScancode47,
												InputId::KeyEscapeScancode48,
												InputId::KeyEscapeScancode49,
												InputId::KeyEscapeScancode50,
												InputId::KeyEscapeScancode51,
												InputId::KeyEscapeScancode52,
												InputId::KeyEscapeScancode53,
												InputId::KeyEscapeScancode54,
												InputId::KeyEscapeScancode55,
												InputId::KeyEscapeScancode56,
												InputId::KeyEscapeScancode57,
												InputId::KeyEscapeScancode58,
												InputId::KeyEscapeScancode59,
												InputId::KeyEscapeScancode60,
												InputId::KeyEscapeScancode61,
												InputId::KeyEscapeScancode62,
												InputId::KeyEscapeScancode63,
												InputId::KeyEscapeScancode64,
												InputId::KeyEscapeScancode65,
												InputId::KeyEscapeScancode66,
												InputId::KeyEscapeScancode67,
												InputId::KeyEscapeScancode68,
												InputId::KeyEscapeScancode69,
												InputId::KeyEscapeScancode70,
												InputId::KeyEscapeScancode71,
												InputId::KeyEscapeScancode72,
												InputId::KeyEscapeScancode73,
												InputId::KeyEscapeScancode74,
												InputId::KeyEscapeScancode75,
												InputId::KeyEscapeScancode76,
												InputId::KeyEscapeScancode77,
												InputId::KeyEscapeScancode78,
												InputId::KeyEscapeScancode79,
												InputId::KeyEscapeScancode80,
												InputId::KeyEscapeScancode81,
												InputId::KeyEscapeScancode82,
												InputId::KeyEscapeScancode83,
												InputId::KeyEscapeScancode84,
												InputId::KeyEscapeScancode85,
												InputId::KeyEscapeScancode86,
												InputId::KeyEscapeScancode87,
												InputId::KeyEscapeScancode88,
												InputId::KeyEscapeScancode89,
												InputId::KeyEscapeScancode90,
												InputId::KeyEscapeScancode91,
												InputId::KeyEscapeScancode92,
												InputId::KeyEscapeScancode93,
												InputId::KeyEscapeScancode94,
												InputId::KeyEscapeScancode95,
												InputId::KeyEscapeScancode96,
												InputId::KeyEscapeScancode97,
												InputId::KeyEscapeScancode98,
												InputId::KeyEscapeScancode99
		};

		Input								_virtualKeys[InputId::KeyboardVirtualEnumCount] = {
												InputId::KeyVirtualA,
												InputId::KeyVirtualB,
												InputId::KeyVirtualC,
												InputId::KeyVirtualD,
												InputId::KeyVirtualE,
												InputId::KeyVirtualF,
												InputId::KeyVirtualG,
												InputId::KeyVirtualH,
												InputId::KeyVirtualI,
												InputId::KeyVirtualJ,
												InputId::KeyVirtualK,
												InputId::KeyVirtualL,
												InputId::KeyVirtualM,
												InputId::KeyVirtualN,
												InputId::KeyVirtualO,
												InputId::KeyVirtualP,
												InputId::KeyVirtualQ,
												InputId::KeyVirtualR,
												InputId::KeyVirtualS,
												InputId::KeyVirtualT,
												InputId::KeyVirtualU,
												InputId::KeyVirtualV,
												InputId::KeyVirtualW,
												InputId::KeyVirtualX,
												InputId::KeyVirtualY,
												InputId::KeyVirtualZ,
		};
	};
}
